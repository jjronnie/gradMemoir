import{d as N,c as d,a as n,u as i,h as R,w as r,b as s,o as p,F as y,r as U,t as a,e as o,f as b,g as m,i as c}from"./app-BXlxvPJ4.js";import{_ as V,a as A,b as B,c as I,d as S,e as z}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-D9b9PEsY.js";import{_ as w}from"./LoadingButton.vue_vue_type_script_setup_true_lang-HJHBRm1v.js";import{_ as O}from"./FlashMessages.vue_vue_type_script_setup_true_lang-HONSxRlG.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-DG7I23hc.js";import"./useForwardPropsEmits-CYY9JK-I.js";import"./RovingFocusGroup-DWhwfIpB.js";import"./useForwardExpose-COt-7_XK.js";import"./index-BB3w2Cxu.js";import"./createLucideIcon-BhpRTv15.js";import"./index-ueziRkVZ.js";import"./Spinner.vue_vue_type_script_setup_true_lang-DuwWGKtl.js";import"./index-C78dSs6T.js";import"./VisuallyHidden-C9aoMcVK.js";const T={class:"space-y-4 p-4"},Y={class:"rounded-xl border border-border bg-card p-4"},q={class:"overflow-x-auto"},E={class:"w-full min-w-[920px] text-sm"},L={class:"px-2 py-2"},j={class:"px-2 py-2"},G={class:"px-2 py-2"},H={class:"px-2 py-2"},J={class:"px-2 py-2"},K={key:0,class:"space-y-2 text-sm"},M={key:1,class:"mt-4 flex flex-wrap gap-2"},Q=["href"],pe=N({__name:"Index",props:{flags:{}},setup($){const t=m(null),f=m(!1),_=m(null),g=m(null),x=m(!1),v=m(null),F=u=>{t.value=u,f.value=!0},k=(u,e)=>{_.value=u,c.put(`/admin/flags/${u}`,{reviewed:e},{preserveScroll:!0,onFinish:()=>{_.value=null}})},D=u=>{v.value=u,x.value=!0},C=()=>{v.value!==null&&(g.value=v.value,c.delete(`/admin/flags/${v.value}`,{preserveScroll:!0,onFinish:()=>{g.value=null,v.value=null,x.value=!1,f.value=!1}}))};return(u,e)=>(p(),d(y,null,[n(i(R),{title:"Flags"}),n(P,null,{default:r(()=>[s("div",T,[e[16]||(e[16]=s("h1",{class:"text-2xl font-semibold"},"User Flags",-1)),s("div",Y,[s("div",q,[s("table",E,[e[5]||(e[5]=s("thead",null,[s("tr",{class:"border-b border-border text-left"},[s("th",{class:"px-2 py-2"},"User"),s("th",{class:"px-2 py-2"},"Flagged By"),s("th",{class:"px-2 py-2"},"Reason"),s("th",{class:"px-2 py-2"},"Reviewed"),s("th",{class:"px-2 py-2"},"Actions")])],-1)),s("tbody",null,[(p(!0),d(y,null,U($.flags.data,l=>(p(),d("tr",{key:l.id,class:"border-b border-border/60"},[s("td",L,a(l.user?.name)+" (@"+a(l.user?.username)+") ",1),s("td",j,a(l.flagged_by?.name),1),s("td",G,a(l.reason),1),s("td",H,a(l.reviewed?"Yes":"No"),1),s("td",J,[n(i(O),{type:"button",size:"sm",variant:"outline",onClick:W=>F(l)},{default:r(()=>[...e[4]||(e[4]=[o(" View ",-1)])]),_:1},8,["onClick"])])]))),128))])])])]),n(i(V),{open:f.value,"onUpdate:open":e[2]||(e[2]=l=>f.value=l)},{default:r(()=>[n(i(A),{class:"max-h-[88vh] max-w-xl overflow-y-auto"},{default:r(()=>[n(i(B),null,{default:r(()=>[n(i(I),null,{default:r(()=>[...e[6]||(e[6]=[o("Flag Details",-1)])]),_:1}),n(i(S),null,{default:r(()=>[...e[7]||(e[7]=[o(" Review this moderation flag. ",-1)])]),_:1})]),_:1}),t.value?(p(),d("div",K,[s("p",null,[e[8]||(e[8]=s("span",{class:"text-muted-foreground"},"Flagged user:",-1)),o(" "+a(t.value.user?.name)+" (@"+a(t.value.user?.username)+") ",1)]),s("p",null,[e[9]||(e[9]=s("span",{class:"text-muted-foreground"},"User email:",-1)),o(" "+a(t.value.user?.email??"N/A"),1)]),s("p",null,[e[10]||(e[10]=s("span",{class:"text-muted-foreground"},"User status:",-1)),o(" "+a(t.value.user?.status??"N/A"),1)]),s("p",null,[e[11]||(e[11]=s("span",{class:"text-muted-foreground"},"Flagged by:",-1)),o(" "+a(t.value.flagged_by?.name),1)]),s("p",null,[e[12]||(e[12]=s("span",{class:"text-muted-foreground"},"Reason:",-1)),o(" "+a(t.value.reason),1)]),s("p",null,[e[13]||(e[13]=s("span",{class:"text-muted-foreground"},"Reviewed:",-1)),o(" "+a(t.value.reviewed?"Yes":"No"),1)])])):b("",!0),t.value?(p(),d("div",M,[n(w,{type:"button",size:"sm",variant:"outline",loading:_.value===t.value.id,"loading-text":"Saving...",onClick:e[0]||(e[0]=l=>k(t.value.id,!t.value.reviewed))},{default:r(()=>[...e[14]||(e[14]=[o(" Toggle Reviewed ",-1)])]),_:1},8,["loading"]),n(w,{type:"button",size:"sm",variant:"destructive",loading:g.value===t.value.id,"loading-text":"Deleting...",onClick:e[1]||(e[1]=l=>D(t.value.id))},{default:r(()=>[...e[15]||(e[15]=[o(" Delete ",-1)])]),_:1},8,["loading"]),t.value.user?.username?(p(),d("a",{key:0,href:`/@${t.value.user.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," View Public Profile ",8,Q)):b("",!0)])):b("",!0)]),_:1})]),_:1},8,["open"]),n(z,{open:x.value,title:"Delete Flag",description:"Are you sure you want to delete this moderation flag?","confirm-text":"Delete",processing:g.value!==null,"onUpdate:open":e[3]||(e[3]=l=>x.value=l),onConfirm:C},null,8,["open","processing"])])]),_:1})],64))}});export{pe as default};
