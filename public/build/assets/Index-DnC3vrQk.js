import{d as O,g as b,j as q,c as d,a as n,u as o,h as z,w as p,b as t,t as m,o as l,F as f,r as x,s as C,e as h,f as _,q as U,x as S,i as P}from"./app-C6RRKohf.js";import{_ as T}from"./AvatarUpload.vue_vue_type_script_setup_true_lang-C3qUjOWJ.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-caY-U6G5.js";import{_ as V}from"./LoadingButton.vue_vue_type_script_setup_true_lang-DgpqqLUX.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-CfxyKX6E.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-Crxc4sWT.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CVBNAReR.js";import"./FlashMessages.vue_vue_type_script_setup_true_lang-Bho2-TZh.js";import"./createLucideIcon-Blwlf4o5.js";import"./Spinner.vue_vue_type_script_setup_true_lang-BBZo8Per.js";import"./index-DRyWtkpL.js";import"./index-Dg8JBSi4.js";import"./useForwardExpose-1VM1fYsj.js";import"./RovingFocusGroup-CODWhOY3.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BWyZZnB0.js";import"./useForwardPropsEmits-Cn_mMC0R.js";import"./index-ueziRkVZ.js";import"./VisuallyHidden-BDd71mT5.js";const H={class:"mx-auto w-full max-w-3xl space-y-6 p-4"},J={class:"space-y-2"},K={class:"text-sm text-muted-foreground"},M={class:"grid grid-cols-4 gap-2"},Q={key:0,class:"space-y-4 rounded-xl border border-border bg-card p-4"},R={class:"grid gap-3 md:grid-cols-2"},W=["onClick"],X={class:"font-semibold"},Z={class:"text-sm text-muted-foreground"},ee={key:1,class:"space-y-4 rounded-xl border border-border bg-card p-4"},re={class:"grid gap-3 md:grid-cols-2"},se=["onClick"],te={class:"font-semibold"},oe={class:"text-sm text-muted-foreground"},le={key:2,class:"space-y-4 rounded-xl border border-border bg-card p-4"},ie={key:0,class:"space-y-3"},ae={class:"grid gap-3 md:grid-cols-2"},de=["onClick"],ue={class:"font-semibold"},ne={class:"text-xs text-muted-foreground"},ce={key:1,class:"text-sm text-muted-foreground"},me={key:3,class:"space-y-4 rounded-xl border border-border bg-card p-4"},_e={class:"flex items-center justify-between"},Fe=O({__name:"Index",props:{universities:{},courses:{},courseYears:{},selectedUniversityId:{},selectedCourseId:{},selectedCourseYearId:{},search:{}},setup(k){const c=k,i=b(1),y=b(c.search??""),g=b(""),a=b({university_id:null,course_id:null,course_year_id:null}),s=q({university_id:c.selectedUniversityId,course_id:c.selectedCourseId,course_year_id:c.selectedCourseYearId,avatar:null}),F=S(()=>y.value.trim()===""?c.universities:c.universities.filter(u=>u.name.toLowerCase().includes(y.value.toLowerCase()))),L=S(()=>{if(g.value.trim()==="")return c.courses;const u=g.value.toLowerCase();return c.courses.filter(e=>`${e.name} ${e.short_name} ${e.nickname??""}`.toLowerCase().includes(u))}),$=S(()=>{const u=c.courseYears.find(e=>e.id===s.course_year_id);return u===void 0?null:`Class of ${u.year}`}),B=u=>{s.university_id=u,s.course_id=null,s.course_year_id=null,a.value.university_id=null,a.value.course_id=null,a.value.course_year_id=null,P.get("/onboarding",{university_id:u},{preserveState:!0,preserveScroll:!0,replace:!0,only:["courses","courseYears","selectedUniversityId","selectedCourseId","selectedCourseYearId"]})},N=u=>{s.course_id=u,s.course_year_id=null,a.value.course_id=null,a.value.course_year_id=null,P.get("/onboarding",{university_id:s.university_id,course_id:u},{preserveState:!0,preserveScroll:!0,replace:!0,only:["courseYears","selectedCourseId","selectedCourseYearId"]})},w=()=>i.value===1?s.university_id===null?(a.value.university_id="Please select a university.",!1):(a.value.university_id=null,!0):i.value===2?s.course_id===null?(a.value.course_id="Please select a course.",!1):(a.value.course_id=null,!0):i.value===3?s.course_year_id===null?(a.value.course_year_id="Please select a cohort.",!1):(a.value.course_year_id=null,!0):!0,j=()=>{w()&&i.value<4&&(i.value+=1)},D=()=>{i.value>1&&(i.value-=1)},E=()=>{w()&&s.post("/onboarding",{forceFormData:!0})};return(u,e)=>(l(),d(f,null,[n(o(z),{title:"Onboarding"}),n(G,null,{default:p(()=>[t("div",H,[t("div",J,[e[3]||(e[3]=t("h1",{class:"text-2xl font-semibold"},"Complete your profile",-1)),t("p",K," Step "+m(i.value)+" of 4 ",1),t("div",M,[(l(),d(f,null,x(4,r=>t("div",{key:r,class:C(["h-1.5 rounded-full",r<=i.value?"bg-primary":"bg-muted"])},null,2)),64))])]),i.value===1?(l(),d("section",Q,[n(o(A),{for:"university-search"},{default:p(()=>[...e[4]||(e[4]=[h("Select University",-1)])]),_:1}),n(o(Y),{id:"university-search",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=r=>y.value=r),placeholder:"Search university..."},null,8,["modelValue"]),t("div",R,[(l(!0),d(f,null,x(F.value,r=>(l(),d("button",{key:r.id,type:"button",class:C(["rounded-lg border p-4 text-left hover:border-primary",o(s).university_id===r.id?"border-primary":"border-border"]),onClick:I=>B(r.id)},[t("p",X,m(r.name),1),t("p",Z,m(r.location),1)],10,W))),128))]),n(v,{message:o(s).errors.university_id},null,8,["message"]),n(v,{message:a.value.university_id},null,8,["message"])])):_("",!0),i.value===2?(l(),d("section",ee,[e[5]||(e[5]=t("h2",{class:"font-semibold"},"Select Program",-1)),n(o(Y),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=r=>g.value=r),placeholder:"Search program..."},null,8,["modelValue"]),t("div",re,[(l(!0),d(f,null,x(L.value,r=>(l(),d("button",{key:r.id,type:"button",class:C(["rounded-lg border p-4 text-left hover:border-primary",o(s).course_id===r.id?"border-primary":"border-border"]),onClick:I=>N(r.id)},[t("p",te,m(r.name),1),t("p",oe,m(r.short_name),1)],10,se))),128))]),n(v,{message:o(s).errors.course_id},null,8,["message"]),n(v,{message:a.value.course_id},null,8,["message"])])):_("",!0),i.value===3?(l(),d("section",le,[e[6]||(e[6]=t("h2",{class:"font-semibold"},"Select Cohort",-1)),k.courseYears.length>0?(l(),d("div",ie,[t("div",ae,[(l(!0),d(f,null,x(k.courseYears,r=>(l(),d("button",{key:r.id,type:"button",class:C(["rounded-lg border p-4 text-left hover:border-primary",o(s).course_year_id===r.id?"border-primary":"border-border"]),onClick:I=>{o(s).course_year_id=r.id,a.value.course_year_id=null}},[t("p",ue," Class of "+m(r.year),1),t("p",ne,m(r.slug),1)],10,de))),128))])])):_("",!0),$.value?(l(),d("p",ce," Selected: "+m($.value),1)):_("",!0),n(v,{message:o(s).errors.course_year_id},null,8,["message"]),n(v,{message:a.value.course_year_id},null,8,["message"])])):_("",!0),i.value===4?(l(),d("section",me,[e[7]||(e[7]=t("h2",{class:"font-semibold"},"Upload Profile Photo (Optional)",-1)),n(T,{modelValue:o(s).avatar,"onUpdate:modelValue":e[2]||(e[2]=r=>o(s).avatar=r)},null,8,["modelValue"])])):_("",!0),t("div",_e,[n(V,{type:"button",variant:"outline",disabled:i.value===1,loading:o(s).processing,"loading-text":"Please wait...",onClick:D},{default:p(()=>[...e[8]||(e[8]=[h(" Back ",-1)])]),_:1},8,["disabled","loading"]),i.value<4?(l(),U(V,{key:0,type:"button",loading:o(s).processing,"loading-text":"Validating...",onClick:j},{default:p(()=>[...e[9]||(e[9]=[h(" Next ",-1)])]),_:1},8,["loading"])):(l(),U(V,{key:1,loading:o(s).processing,"loading-text":"Finishing...",onClick:E},{default:p(()=>[...e[10]||(e[10]=[h(" Finish ",-1)])]),_:1},8,["loading"]))])])]),_:1})],64))}});export{Fe as default};
