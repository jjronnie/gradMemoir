import{e as z}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-CGOEXzev.js";import{_ as T}from"./InputError.vue_vue_type_script_setup_true_lang-BltmWT9M.js";import{_ as k}from"./LoadingButton.vue_vue_type_script_setup_true_lang-B7F_b-eQ.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang--CnlkcD7.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-CPtdiE_o.js";import{d as q,j as E,g as n,c as o,a as c,u as w,h as D,w as _,b as t,o as r,F as P,r as R,t as d,p as S,e as $,f as g,i as F}from"./app-DW2KkjvG.js";import"./useForwardPropsEmits-Dt7zh49w.js";import"./RovingFocusGroup-DlkB2bT6.js";import"./FlashMessages.vue_vue_type_script_setup_true_lang-DzlBP8Dr.js";import"./useForwardExpose-Bu8G4Clg.js";import"./index-BafghysU.js";import"./createLucideIcon-DK4FZEuV.js";import"./index-ueziRkVZ.js";import"./Spinner.vue_vue_type_script_setup_true_lang-Bs6myhA4.js";import"./index-DDc9h_z2.js";import"./VisuallyHidden-BooNPzSY.js";const O={class:"space-y-4 p-4"},L={class:"rounded-xl border border-border bg-card p-4"},Q={key:0,class:"mt-4 grid gap-3 md:grid-cols-2 xl:grid-cols-3"},W={class:"flex items-start gap-3"},G=["src","alt"],H={key:1,class:"flex h-12 w-12 items-center justify-center rounded bg-muted text-xs text-muted-foreground"},J={class:"min-w-0 flex-1"},K={class:"truncate text-sm font-semibold"},M={class:"truncate text-xs text-muted-foreground"},X={class:"truncate text-xs text-muted-foreground"},Y={class:"mt-3 flex flex-wrap gap-2"},Z=["href"],ee={key:0,class:"text-sm text-muted-foreground"},te={class:"rounded-xl border border-border bg-card p-4"},re={key:0,class:"mb-3 text-xs text-amber-600"},se={key:1,class:"overflow-x-auto rounded-lg border border-border"},oe={class:"min-w-full text-left text-sm"},le={class:"px-4 py-3"},ae={class:"px-4 py-3"},ne=["src","alt"],de={key:1,class:"flex h-10 w-10 items-center justify-center rounded bg-muted text-xs text-muted-foreground"},ie={class:"px-4 py-3 font-medium"},ue={class:"px-4 py-3 text-muted-foreground"},ce={class:"px-4 py-3 text-muted-foreground"},me={class:"px-4 py-3"},fe={class:"flex flex-wrap gap-2"},pe=["href"],ve={key:2,class:"text-sm text-muted-foreground"},Ve=q({__name:"Index",props:{featuredProfiles:{},search:{},searchResults:{}},setup(i){const N=i,f=E({user_id:""}),p=n(N.search),m=n(null),v=n(null),u=n(!1),h=n(""),b=n(""),a=n(null);let y=null;const V=()=>{y!==null&&clearTimeout(y),y=setTimeout(()=>{F.get("/admin/featured-profiles",{search:p.value},{preserveState:!0,preserveScroll:!0,replace:!0})},300)},x=l=>l?.[0]?.conversions?.thumb??l?.[0]?.conversions?.full??l?.[0]?.original_url??null,U=l=>{a.value={type:"add",user:l},h.value="Add Featured Profile",b.value=`Add ${l.name} to featured profiles?`,u.value=!0},A=l=>{a.value={type:"remove",id:l},h.value="Remove Featured Profile",b.value="Remove this profile from the featured list?",u.value=!0},j=()=>{if(a.value!==null){if(a.value.type==="add"){const l=a.value.user;f.clearErrors(),f.user_id=String(l.id),v.value=l.id,f.post("/admin/featured-profiles",{preserveScroll:!0,onFinish:()=>{v.value=null,u.value=!1,a.value=null}});return}m.value=a.value.id,F.delete(`/admin/featured-profiles/${a.value.id}`,{preserveScroll:!0,onFinish:()=>{m.value=null,u.value=!1,a.value=null}})}};return(l,s)=>(r(),o(P,null,[c(w(D),{title:"Featured Profiles"}),c(I,null,{default:_(()=>[t("div",O,[s[7]||(s[7]=t("h1",{class:"text-2xl font-semibold"},"Featured Profiles",-1)),t("div",L,[s[4]||(s[4]=t("label",{class:"mb-2 block text-sm font-medium"},"Search users to add/remove",-1)),c(w(B),{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),placeholder:"Search by name, username, or email...",onInput:V},null,8,["modelValue"]),c(T,{message:w(f).errors.user_id,class:"mt-2"},null,8,["message"]),p.value.trim()!==""?(r(),o("div",Q,[(r(!0),o(P,null,R(i.searchResults,e=>(r(),o("article",{key:e.id,class:"rounded-lg border border-border p-3"},[t("div",W,[x(e.media)?(r(),o("img",{key:0,src:x(e.media)??"",alt:e.name,class:"h-12 w-12 rounded object-cover",loading:"lazy"},null,8,G)):(r(),o("div",H," N/A ")),t("div",J,[t("p",K,d(e.name),1),t("p",M," @"+d(e.username),1),t("p",X,d(e.email),1)])]),t("div",Y,[t("a",{href:`/@${e.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," Show ",8,Z),e.featured_profile?(r(),S(k,{key:1,type:"button",size:"sm",variant:"destructive",loading:m.value===e.featured_profile.id,"loading-text":"Removing...",onClick:C=>A(e.featured_profile.id)},{default:_(()=>[...s[3]||(s[3]=[$(" Remove ",-1)])]),_:1},8,["loading","onClick"])):(r(),S(k,{key:0,type:"button",size:"sm",loading:v.value===e.id,"loading-text":"Adding...",onClick:C=>U(e)},{default:_(()=>[...s[2]||(s[2]=[$(" Add ",-1)])]),_:1},8,["loading","onClick"]))])]))),128)),i.searchResults.length===0?(r(),o("p",ee," No matching users found. ")):g("",!0)])):g("",!0)]),t("div",te,[i.featuredProfiles.data.length>20?(r(),o("p",re," Warning: more than 20 featured profiles may reduce homepage quality. ")):g("",!0),i.featuredProfiles.data.length>0?(r(),o("div",se,[t("table",oe,[s[6]||(s[6]=t("thead",{class:"bg-muted/40 text-xs uppercase tracking-wide text-muted-foreground"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Order"),t("th",{class:"px-4 py-3"},"Photo"),t("th",{class:"px-4 py-3"},"Name"),t("th",{class:"px-4 py-3"},"Username"),t("th",{class:"px-4 py-3"},"Email"),t("th",{class:"px-4 py-3"},"Actions")])],-1)),t("tbody",null,[(r(!0),o(P,null,R(i.featuredProfiles.data,e=>(r(),o("tr",{key:e.id,class:"border-t border-border align-middle"},[t("td",le,d(e.sort_order),1),t("td",ae,[x(e.user?.media)?(r(),o("img",{key:0,src:x(e.user?.media)??"",alt:e.user?.name??"Profile photo",class:"h-10 w-10 rounded object-cover",loading:"lazy"},null,8,ne)):(r(),o("div",de," N/A "))]),t("td",ie,d(e.user?.name??"Unknown user"),1),t("td",ue," @"+d(e.user?.username),1),t("td",ce,d(e.user?.email),1),t("td",me,[t("div",fe,[e.user?.username?(r(),o("a",{key:0,href:`/@${e.user.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," Show ",8,pe)):g("",!0),c(k,{type:"button",size:"sm",variant:"destructive",loading:m.value===e.id,"loading-text":"Removing...",onClick:C=>A(e.id)},{default:_(()=>[...s[5]||(s[5]=[$(" Remove ",-1)])]),_:1},8,["loading","onClick"])])])]))),128))])])])):(r(),o("p",ve," No featured profiles yet. "))])]),c(z,{open:u.value,title:h.value,description:b.value,"confirm-text":a.value?.type==="add"?"Add":"Remove","confirm-variant":a.value?.type==="add"?"default":"destructive",processing:v.value!==null||m.value!==null,"onUpdate:open":s[1]||(s[1]=e=>u.value=e),onConfirm:j},null,8,["open","title","description","confirm-text","confirm-variant","processing"])]),_:1})],64))}});export{Ve as default};
