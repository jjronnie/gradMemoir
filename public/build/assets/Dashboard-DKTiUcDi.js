import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-CPtdiE_o.js";import{d as N,c as f,a as l,u as n,h as V,w as i,b as e,t as s,y as v,C as D,e as o,o as a,f as b,l as u,p as y,F as _,r as B,x as m,D as S}from"./app-DW2KkjvG.js";import"./FlashMessages.vue_vue_type_script_setup_true_lang-DzlBP8Dr.js";import"./index-DDc9h_z2.js";import"./index-BafghysU.js";import"./RovingFocusGroup-DlkB2bT6.js";import"./useForwardExpose-Bu8G4Clg.js";import"./createLucideIcon-DK4FZEuV.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CGOEXzev.js";import"./useForwardPropsEmits-Dt7zh49w.js";import"./index-ueziRkVZ.js";import"./VisuallyHidden-BooNPzSY.js";const G={class:"mx-auto w-full max-w-6xl space-y-6 p-4"},R={class:"rounded-2xl border border-border bg-card p-6"},Y={class:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between"},$={class:"space-y-1"},j={class:"text-sm text-muted-foreground"},z={class:"text-3xl font-semibold"},F={class:"text-sm text-muted-foreground"},L={class:"flex items-center gap-2"},O={class:"rounded-full border border-border px-3 py-1 text-xs font-medium text-muted-foreground"},T={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-4"},E={class:"rounded-xl border border-border bg-card p-4"},H={class:"mt-2 text-2xl font-semibold"},Q={class:"rounded-xl border border-border bg-card p-4"},q={class:"rounded-xl border border-border bg-card p-4"},I={class:"mt-2 text-2xl font-semibold"},J={class:"rounded-xl border border-border bg-card p-4"},K={class:"mt-2 text-sm font-semibold"},W={class:"grid gap-4 lg:grid-cols-5"},X={class:"rounded-xl border border-border bg-card p-4 lg:col-span-3"},Z={class:"flex items-center justify-between"},ee={class:"text-xs text-muted-foreground"},te={class:"mt-3 h-2 w-full overflow-hidden rounded-full bg-muted"},se={class:"mt-3 text-sm text-muted-foreground"},oe={class:"font-medium text-foreground"},re={key:0},de={class:"rounded-xl border border-border bg-card p-4 lg:col-span-2"},ne={class:"mt-3 grid gap-2"},ie={class:"grid gap-4 lg:grid-cols-5"},le={class:"rounded-xl border border-border bg-card p-4 lg:col-span-2"},ae={class:"mt-3 space-y-3 text-sm"},ue={class:"text-muted-foreground"},me={key:1,class:"font-medium text-foreground"},ce={class:"text-muted-foreground"},fe={class:"text-muted-foreground"},pe={class:"rounded-xl border border-border bg-card p-4 lg:col-span-3"},ge={class:"mt-3 space-y-3"},be={class:"text-sm font-medium"},xe={class:"mt-1 text-xs text-muted-foreground"},he={key:0,class:"text-sm text-muted-foreground"},De=N({__name:"Dashboard",props:{recentPosts:{},managedCourseYear:{},myUniversity:{},photoUsage:{}},setup(r){const p=r,U=S(),d=m(()=>U.props.auth.user),P=m(()=>{const c=new Date().getHours();return c<12?"Good morning":c<18?"Good afternoon":"Good evening"}),w=m(()=>{const c=d.value?.roles?.[0]??"student";return c.charAt(0).toUpperCase()+c.slice(1)}),k=m(()=>d.value?.roles?.includes("admin")??!1),x=m(()=>d.value?.course_year_url??"/dashboard"),C=m(()=>d.value?.profile_url??"/dashboard"),h=m(()=>p.photoUsage.limit<=0?0:Math.min(Math.round(p.photoUsage.used/p.photoUsage.limit*100),100)),M=m(()=>p.photoUsage.remaining<=1?"text-destructive":p.photoUsage.remaining<=3?"text-amber-600":"text-emerald-600");return(c,t)=>(a(),f(_,null,[l(n(V),{title:"Dashboard"}),l(A,null,{default:i(()=>[e("div",G,[e("section",R,[e("div",Y,[e("div",$,[e("p",j,s(P.value)+",",1),e("h1",z,s(d.value?.name),1),e("p",F," @"+s(d.value?.username)+" Â· "+s(d.value?.email),1)]),e("div",L,[e("span",O,s(w.value),1),e("span",{class:v(["rounded-full border border-border px-3 py-1 text-xs font-medium",d.value?.is_verified?"text-emerald-600":"text-muted-foreground"])},s(d.value?.is_verified?"Verified":"Unverified"),3)])])]),e("section",T,[e("article",E,[t[0]||(t[0]=e("p",{class:"text-xs uppercase tracking-wider text-muted-foreground"},"Photos Used",-1)),e("p",H,s(r.photoUsage.used)+" / "+s(r.photoUsage.limit),1)]),e("article",Q,[t[1]||(t[1]=e("p",{class:"text-xs uppercase tracking-wider text-muted-foreground"},"Slots Remaining",-1)),e("p",{class:v(["mt-2 text-2xl font-semibold",M.value])},s(r.photoUsage.remaining),3)]),e("article",q,[t[2]||(t[2]=e("p",{class:"text-xs uppercase tracking-wider text-muted-foreground"},"Recent Posts",-1)),e("p",I,s(r.recentPosts.length),1)]),e("article",J,[t[3]||(t[3]=e("p",{class:"text-xs uppercase tracking-wider text-muted-foreground"},"University",-1)),e("p",K,s(r.myUniversity?.name??"Not set"),1)])]),e("section",W,[e("article",X,[e("div",Z,[t[4]||(t[4]=e("h2",{class:"text-base font-semibold"},"Photo Capacity",-1)),e("span",ee,s(h.value)+"%",1)]),e("div",te,[e("div",{class:"h-full bg-primary transition-all",style:D({width:`${h.value}%`})},null,4)]),e("p",se,[t[5]||(t[5]=o(" You can still upload ",-1)),e("span",oe,s(r.photoUsage.remaining),1),t[6]||(t[6]=o(" photo",-1)),r.photoUsage.remaining!==1?(a(),f("span",re,"s")):b("",!0),t[7]||(t[7]=o(". ",-1))])]),e("article",de,[t[13]||(t[13]=e("h2",{class:"text-base font-semibold"},"Quick Actions",-1)),e("div",ne,[l(n(u),{href:"/posts/create",class:"rounded-md border border-border px-3 py-2 text-sm font-medium hover:bg-accent"},{default:i(()=>[...t[8]||(t[8]=[o(" Add Photo ",-1)])]),_:1}),l(n(u),{href:"/posts",class:"rounded-md border border-border px-3 py-2 text-sm font-medium hover:bg-accent"},{default:i(()=>[...t[9]||(t[9]=[o(" Manage My Posts ",-1)])]),_:1}),l(n(u),{href:x.value,class:"rounded-md border border-border px-3 py-2 text-sm font-medium hover:bg-accent"},{default:i(()=>[...t[10]||(t[10]=[o(" Open My Cohort ",-1)])]),_:1},8,["href"]),l(n(u),{href:"/settings/profile",class:"rounded-md border border-border px-3 py-2 text-sm font-medium hover:bg-accent"},{default:i(()=>[...t[11]||(t[11]=[o(" Profile Settings ",-1)])]),_:1}),k.value?(a(),y(n(u),{key:0,href:"/course-admin",class:"rounded-md border border-border px-3 py-2 text-sm font-medium hover:bg-accent"},{default:i(()=>[...t[12]||(t[12]=[o(" Manage Cohort Members ",-1)])]),_:1})):b("",!0)])])]),e("section",ie,[e("article",le,[t[19]||(t[19]=e("h2",{class:"text-base font-semibold"},"Academic Profile",-1)),e("div",ae,[e("p",ue,[t[14]||(t[14]=o(" University: ",-1)),r.myUniversity?(a(),y(n(u),{key:0,href:`/universities/${r.myUniversity.slug}`,class:"font-medium text-foreground underline underline-offset-4"},{default:i(()=>[o(s(r.myUniversity.name),1)]),_:1},8,["href"])):(a(),f("span",me,"Not set"))]),e("p",ce,[t[16]||(t[16]=o(" My profile: ",-1)),l(n(u),{href:C.value,class:"font-medium text-foreground underline underline-offset-4"},{default:i(()=>[...t[15]||(t[15]=[o(" View public profile ",-1)])]),_:1},8,["href"])]),e("p",fe,[t[18]||(t[18]=o(" Cohort: ",-1)),l(n(u),{href:x.value,class:"font-medium text-foreground underline underline-offset-4"},{default:i(()=>[...t[17]||(t[17]=[o(" Open class archive ",-1)])]),_:1},8,["href"])])])]),e("article",pe,[t[20]||(t[20]=e("h2",{class:"text-base font-semibold"},"Recent Activity",-1)),e("div",ge,[(a(!0),f(_,null,B(r.recentPosts,g=>(a(),f("article",{key:g.id,class:"rounded-lg border border-border p-3"},[e("p",be,s(g.body||"Photo post"),1),e("p",xe,s(g.published?"Published":"Processing"),1)]))),128)),r.recentPosts.length===0?(a(),f("p",he," No recent posts yet. Add your first photo to get started. ")):b("",!0)])])])])]),_:1})],64))}});export{De as default};
