import{d as w,p as N,u as e,J as S,w as s,H as L,o as h,ak as H,c as C,a as r,b as d,e as n,ah as j,t as P,y as J,x as $,D as W,j as T,h as z,k as E,f as M}from"./app-DW2KkjvG.js";import{_ as O,a as R}from"./UsernameInput.vue_vue_type_script_setup_true_lang-BavDwKKL.js";import{q as U}from"./index-ueziRkVZ.js";import{a as q,_ as X}from"./Layout.vue_vue_type_script_setup_true_lang-CcjsKr-b.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-BltmWT9M.js";import{_ as Q}from"./FlashMessages.vue_vue_type_script_setup_true_lang-DzlBP8Dr.js";import{w as G,a as K,b as Y,c as Z,d as ee,B as ae,_ as te,A as re}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-CGOEXzev.js";import{_ as oe}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CATGt2yk.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang--CnlkcD7.js";import{_ as i}from"./Label.vue_vue_type_script_setup_true_lang-_4_XZR1r.js";import{_ as F}from"./LoadingButton.vue_vue_type_script_setup_true_lang-B7F_b-eQ.js";import{_ as le}from"./AppLayout.vue_vue_type_script_setup_true_lang-CPtdiE_o.js";import"./createLucideIcon-DK4FZEuV.js";import"./index-BafghysU.js";import"./index-DZmBbJgz.js";import"./useForwardPropsEmits-Dt7zh49w.js";import"./RovingFocusGroup-DlkB2bT6.js";import"./useForwardExpose-Bu8G4Clg.js";import"./index-DDc9h_z2.js";import"./Spinner.vue_vue_type_script_setup_true_lang-Bs6myhA4.js";import"./VisuallyHidden-BooNPzSY.js";const se=w({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(a){const y=a;return(v,l)=>(h(),N(e(G),S({"data-slot":"dialog-close"},y),{default:s(()=>[L(v.$slots,"default")]),_:3},16))}}),m=a=>({url:m.url(a),method:"get"});m.definition={methods:["get","head"],url:"/settings/profile"};m.url=a=>m.definition.url+U(a);m.get=a=>({url:m.url(a),method:"get"});m.head=a=>({url:m.url(a),method:"head"});const D=a=>({action:m.url(a),method:"get"});D.get=a=>({action:m.url(a),method:"get"});D.head=a=>({action:m.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...a?.query??a?.mergeQuery??{}}}),method:"get"});m.form=D;const p=a=>({url:p.url(a),method:"patch"});p.definition={methods:["patch","put"],url:"/settings/profile"};p.url=a=>p.definition.url+U(a);p.patch=a=>({url:p.url(a),method:"patch"});p.put=a=>({url:p.url(a),method:"put"});const A=a=>({action:p.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});A.patch=a=>({action:p.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...a?.query??a?.mergeQuery??{}}}),method:"post"});A.put=a=>({action:p.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...a?.query??a?.mergeQuery??{}}}),method:"post"});p.form=A;const c=a=>({url:c.url(a),method:"put"});c.definition={methods:["put"],url:"/settings/avatar"};c.url=a=>c.definition.url+U(a);c.put=a=>({url:c.url(a),method:"put"});const B=a=>({action:c.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...a?.query??a?.mergeQuery??{}}}),method:"post"});B.put=a=>({action:c.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"PUT",...a?.query??a?.mergeQuery??{}}}),method:"post"});c.form=B;const _=a=>({url:_.url(a),method:"delete"});_.definition={methods:["delete"],url:"/settings/profile"};_.url=a=>_.definition.url+U(a);_.delete=a=>({url:_.url(a),method:"delete"});const I=a=>({action:_.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...a?.query??a?.mergeQuery??{}}}),method:"post"});I.delete=a=>({action:_.url({[a?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...a?.query??a?.mergeQuery??{}}}),method:"post"});_.form=I;const ue={edit:m,update:p,updateAvatar:c,destroy:_},de={class:"space-y-6"},ne={class:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10"},ie={class:"grid gap-2"},me=w({__name:"DeleteUser",setup(a){const y=H("passwordInput");return(v,l)=>(h(),C("div",de,[r(q,{variant:"small",title:"Delete account",description:"Delete your account and all of its resources"}),d("div",ne,[l[7]||(l[7]=d("div",{class:"relative space-y-0.5 text-red-600 dark:text-red-100"},[d("p",{class:"font-medium"},"Warning"),d("p",{class:"text-sm"}," Please proceed with caution, this cannot be undone. ")],-1)),r(e(te),null,{default:s(()=>[r(e(oe),{"as-child":""},{default:s(()=>[r(e(Q),{variant:"destructive","data-test":"delete-user-button"},{default:s(()=>[...l[1]||(l[1]=[n("Delete account",-1)])]),_:1})]),_:1}),r(e(K),null,{default:s(()=>[r(e(j),S(e(ue).destroy.form(),{"reset-on-success":"",onError:l[0]||(l[0]=()=>y.value?.$el?.focus()),options:{preserveScroll:!0},class:"space-y-6"}),{default:s(({errors:o,processing:g,reset:V,clearErrors:x})=>[r(e(Y),{class:"space-y-3"},{default:s(()=>[r(e(Z),null,{default:s(()=>[...l[2]||(l[2]=[n("Are you sure you want to delete your account?",-1)])]),_:1}),r(e(ee),null,{default:s(()=>[...l[3]||(l[3]=[n(" Once your account is deleted, all of its resources and data will also be permanently deleted. Please enter your password to confirm you would like to permanently delete your account. ",-1)])]),_:1})]),_:1}),d("div",ie,[r(e(i),{for:"password",class:"sr-only"},{default:s(()=>[...l[4]||(l[4]=[n("Password",-1)])]),_:1}),r(e(f),{id:"password",type:"password",name:"password",ref_key:"passwordInput",ref:y,placeholder:"Password"},null,512),r(b,{message:o.password},null,8,["message"])]),r(e(ae),{class:"gap-2"},{default:s(()=>[r(e(se),{"as-child":""},{default:s(()=>[r(e(Q),{variant:"secondary",onClick:()=>{x(),V()}},{default:s(()=>[...l[5]||(l[5]=[n(" Cancel ",-1)])]),_:1},8,["onClick"])]),_:2},1024),r(e(Q),{type:"submit",variant:"destructive",disabled:g,"data-test":"confirm-delete-user-button"},{default:s(()=>[...l[6]||(l[6]=[n(" Delete account ",-1)])]),_:1},8,["disabled"])]),_:2},1024)]),_:1},16)]),_:1})]),_:1})])]))}}),pe={class:"grid gap-2"},fe=["name","rows","value","placeholder"],ge=w({__name:"WordCountTextarea",props:{modelValue:{},name:{default:"bio"},maxWords:{default:100},rows:{default:4},placeholder:{default:""}},emits:["update:modelValue"],setup(a,{emit:y}){const v=a,l=y,o=W(),g=$(()=>{const k=v.modelValue.trim();return k===""?0:k.split(/\s+/).length}),V=$(()=>g.value>v.maxWords?"text-destructive":g.value>=v.maxWords-10?"text-amber-600":"text-muted-foreground"),x=$(()=>o.props.errors?.[v.name]??null);return(k,t)=>(h(),C("div",pe,[d("textarea",{name:a.name,rows:a.rows,value:a.modelValue,placeholder:a.placeholder,class:"flex min-h-24 w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-xs outline-none ring-ring/50 transition-[color,box-shadow] placeholder:text-muted-foreground focus-visible:ring-[3px]",onInput:t[0]||(t[0]=u=>l("update:modelValue",u.target.value))},null,40,fe),d("div",{class:J(["text-right text-xs",V.value])},P(g.value)+" / "+P(a.maxWords)+" words ",3),r(b,{message:x.value},null,8,["message"])]))}}),ce={class:"space-y-6"},_e={class:"grid gap-2"},ye={class:"grid gap-2"},be={class:"grid gap-2"},ve={key:0,class:"text-xs text-muted-foreground"},Ve={class:"grid gap-4 md:grid-cols-2"},xe={class:"grid gap-2"},he={class:"grid gap-2"},ke={class:"grid gap-2"},we={class:"grid gap-2"},Ue={class:"grid gap-4 md:grid-cols-2"},$e={class:"grid gap-2"},Qe={class:"grid gap-2"},Pe={class:"grid gap-2"},qe={class:"grid gap-2"},Ce={class:"grid gap-2"},De={class:"space-y-4"},Ze=w({__name:"Profile",props:{canUpdateUsernameAt:{}},setup(a){const y=a,l=W().props.auth.user,o=T({name:l?.name??"",email:l?.email??"",username:l?.username??"",bio:l?.bio??"",profession:l?.profession??"",location:l?.location??"",phone:l?.phone??"",facebook_username:l?.facebook_username??"",x_username:l?.x_username??"",tiktok_username:l?.tiktok_username??"",instagram_username:l?.instagram_username??"",website:l?.website??"",email_public:l?.email_public??""}),g=T({avatar:null}),V=()=>{o.put("/settings/profile")},x=()=>{g.put("/settings/avatar",{forceFormData:!0})};return(k,t)=>(h(),N(le,{breadcrumbs:[{title:"Profile settings",href:e(re)().url}]},{default:s(()=>[r(e(z),{title:"Profile settings"}),r(X,null,{default:s(()=>[d("div",ce,[r(q,{variant:"small",title:"Profile information",description:"Update your public and account profile details."}),d("form",{class:"space-y-6",onSubmit:E(V,["prevent"])},[d("div",_e,[r(e(i),{for:"name"},{default:s(()=>[...t[14]||(t[14]=[n("Name",-1)])]),_:1}),r(e(f),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=u=>e(o).name=u),placeholder:"e.g. Jane Doe"},null,8,["modelValue"]),r(b,{message:e(o).errors.name},null,8,["message"])]),d("div",ye,[r(e(i),{for:"email"},{default:s(()=>[...t[15]||(t[15]=[n("Email",-1)])]),_:1}),r(e(f),{id:"email",type:"email",modelValue:e(o).email,"onUpdate:modelValue":t[1]||(t[1]=u=>e(o).email=u),placeholder:"you@example.com"},null,8,["modelValue"]),r(b,{message:e(o).errors.email},null,8,["message"])]),d("div",be,[r(e(i),null,{default:s(()=>[...t[16]||(t[16]=[n("Username",-1)])]),_:1}),r(O,{modelValue:e(o).username,"onUpdate:modelValue":t[2]||(t[2]=u=>e(o).username=u)},null,8,["modelValue"]),y.canUpdateUsernameAt?(h(),C("p",ve," Next change available on "+P(new Date(y.canUpdateUsernameAt).toLocaleDateString()),1)):M("",!0)]),r(ge,{modelValue:e(o).bio,"onUpdate:modelValue":t[3]||(t[3]=u=>e(o).bio=u),name:"bio",placeholder:"Tell your class about yourself"},null,8,["modelValue"]),d("div",Ve,[d("div",xe,[r(e(i),{for:"profession"},{default:s(()=>[...t[17]||(t[17]=[n("Profession",-1)])]),_:1}),r(e(f),{id:"profession",modelValue:e(o).profession,"onUpdate:modelValue":t[4]||(t[4]=u=>e(o).profession=u),placeholder:"e.g. Photographer"},null,8,["modelValue"]),r(b,{message:e(o).errors.profession},null,8,["message"])]),d("div",he,[r(e(i),{for:"location"},{default:s(()=>[...t[18]||(t[18]=[n("Location",-1)])]),_:1}),r(e(f),{id:"location",modelValue:e(o).location,"onUpdate:modelValue":t[5]||(t[5]=u=>e(o).location=u),placeholder:"e.g. Lagos, Nigeria"},null,8,["modelValue"]),r(b,{message:e(o).errors.location},null,8,["message"])])]),d("div",ke,[r(e(i),{for:"phone"},{default:s(()=>[...t[19]||(t[19]=[n("WhatsApp Number",-1)])]),_:1}),r(e(f),{id:"phone",modelValue:e(o).phone,"onUpdate:modelValue":t[6]||(t[6]=u=>e(o).phone=u),placeholder:"+1 555 123 4567"},null,8,["modelValue"]),r(b,{message:e(o).errors.phone},null,8,["message"])]),d("div",we,[r(e(i),{for:"website"},{default:s(()=>[...t[20]||(t[20]=[n("Website (without https://)",-1)])]),_:1}),r(e(f),{id:"website",modelValue:e(o).website,"onUpdate:modelValue":t[7]||(t[7]=u=>e(o).website=u),placeholder:"example.com"},null,8,["modelValue"]),r(b,{message:e(o).errors.website},null,8,["message"])]),d("div",Ue,[d("div",$e,[r(e(i),{for:"facebook_username"},{default:s(()=>[...t[21]||(t[21]=[n("Facebook",-1)])]),_:1}),r(e(f),{id:"facebook_username",modelValue:e(o).facebook_username,"onUpdate:modelValue":t[8]||(t[8]=u=>e(o).facebook_username=u),placeholder:"facebook_username"},null,8,["modelValue"])]),d("div",Qe,[r(e(i),{for:"x_username"},{default:s(()=>[...t[22]||(t[22]=[n("X",-1)])]),_:1}),r(e(f),{id:"x_username",modelValue:e(o).x_username,"onUpdate:modelValue":t[9]||(t[9]=u=>e(o).x_username=u),placeholder:"x_username"},null,8,["modelValue"])]),d("div",Pe,[r(e(i),{for:"tiktok_username"},{default:s(()=>[...t[23]||(t[23]=[n("TikTok",-1)])]),_:1}),r(e(f),{id:"tiktok_username",modelValue:e(o).tiktok_username,"onUpdate:modelValue":t[10]||(t[10]=u=>e(o).tiktok_username=u),placeholder:"tiktok_username"},null,8,["modelValue"])]),d("div",qe,[r(e(i),{for:"instagram_username"},{default:s(()=>[...t[24]||(t[24]=[n("Instagram",-1)])]),_:1}),r(e(f),{id:"instagram_username",modelValue:e(o).instagram_username,"onUpdate:modelValue":t[11]||(t[11]=u=>e(o).instagram_username=u),placeholder:"instagram_username"},null,8,["modelValue"])])]),d("div",Ce,[r(e(i),{for:"email_public"},{default:s(()=>[...t[25]||(t[25]=[n("Public Email",-1)])]),_:1}),r(e(f),{id:"email_public",type:"email",modelValue:e(o).email_public,"onUpdate:modelValue":t[12]||(t[12]=u=>e(o).email_public=u),placeholder:"public-contact@example.com"},null,8,["modelValue"]),r(b,{message:e(o).errors.email_public},null,8,["message"])]),r(F,{type:"submit",loading:e(o).processing,"loading-text":"Saving..."},{default:s(()=>[...t[26]||(t[26]=[n(" Save Profile ",-1)])]),_:1},8,["loading"])],32)]),d("div",De,[r(q,{variant:"small",title:"Avatar",description:"Upload and replace your profile picture."}),d("form",{class:"space-y-4",onSubmit:E(x,["prevent"])},[r(R,{modelValue:e(g).avatar,"onUpdate:modelValue":t[13]||(t[13]=u=>e(g).avatar=u),"current-avatar":e(l)?.avatar??null},null,8,["modelValue","current-avatar"]),r(F,{type:"submit",loading:e(g).processing,"loading-text":"Uploading..."},{default:s(()=>[...t[27]||(t[27]=[n(" Update Avatar ",-1)])]),_:1},8,["loading"])],32)]),r(me)]),_:1})]),_:1},8,["breadcrumbs"]))}});export{Ze as default};
