import{d as L,c as n,s as M,b as l,o as s,B as q,a as y,u as C,h as S,w as B,t as f,q as k,f as c,F as p,r as N,l as U,g as h,x as u}from"./app-C6RRKohf.js";import{_ as P}from"./PhotoCarousel.vue_vue_type_script_setup_true_lang-D3rU74a-.js";import{_ as X}from"./ShareButton.vue_vue_type_script_setup_true_lang-U2EJSMyN.js";import{_ as G}from"./PublicLayout.vue_vue_type_script_setup_true_lang-NedMu4Sb.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BWyZZnB0.js";import"./useForwardPropsEmits-Cn_mMC0R.js";import"./RovingFocusGroup-CODWhOY3.js";import"./FlashMessages.vue_vue_type_script_setup_true_lang-Bho2-TZh.js";import"./useForwardExpose-1VM1fYsj.js";import"./index-Dg8JBSi4.js";import"./createLucideIcon-Blwlf4o5.js";import"./index-ueziRkVZ.js";const H=L({__name:"VerifiedBadgeIcon",props:{class:{}},setup(a){const t=a;return(g,d)=>(s(),n("svg",{viewBox:"0 0 24 24","aria-hidden":"true",class:M(t.class)},[...d[0]||(d[0]=[l("circle",{cx:"12",cy:"12",r:"10",fill:"currentColor"},null,-1),l("path",{d:"M8 12.5 10.7 15 16 9.5",fill:"none",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1)])],2))}}),K={class:"mx-auto mt-6 w-[90%]"},Q={class:"flex flex-col gap-7 lg:flex-row lg:items-start lg:gap-10"},Y={class:"mx-auto w-full max-w-sm lg:mx-0 lg:w-72 lg:max-w-none"},Z=["src","alt"],ee={key:1,class:"flex h-full w-full items-center justify-center text-5xl font-semibold text-muted-foreground"},te={class:"flex-1"},oe={class:"text-center lg:text-left"},le={class:"inline-flex items-center gap-2"},se={class:"text-3xl font-semibold sm:text-4xl"},re={class:"mt-1 text-base text-muted-foreground"},ae={key:0,class:"my-5 h-px bg-border"},ne={key:1,class:"space-y-3 text-base text-muted-foreground"},ie={key:0,class:"h-px bg-border"},ue=["src","alt"],ce={key:3,class:"flex items-center gap-2"},fe={key:4,class:"flex items-center gap-2"},de={key:5,class:"flex items-start gap-2 leading-relaxed"},me={key:2,class:"mt-5 h-px bg-border"},pe={key:3,class:"mt-5"},he={class:"grid grid-cols-4 gap-3 lg:flex lg:flex-nowrap lg:justify-start lg:gap-4"},ge=["href","aria-label"],ve={class:"mt-8 border-t border-border pt-8 pb-10"},be={class:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4"},xe=["onClick"],ye=["src"],ke={key:0,class:"rounded-xl border border-dashed border-border p-6 text-center text-sm text-muted-foreground"},Le=L({__name:"Show",props:{profile:{},posts:{}},setup(a){const t=a,g=h(!1),d=h(!1),_=h([]),j=h(0),V=h(""),v=u(()=>t.profile.media?.[0]?.conversions?.full??t.profile.media?.[0]?.original_url??null),T=u(()=>t.profile.name.trim().charAt(0).toUpperCase()||"U"),I=u(()=>!t.profile.course?.short_name||!t.profile.course?.year?null:`${t.profile.course.short_name.toUpperCase()} Class of ${t.profile.course.year}`),z=u(()=>!!(t.profile.university?.name&&t.profile.university?.slug)),F=u(()=>!!(t.profile.course?.slug&&I.value)),A=u(()=>!!t.profile.location),E=u(()=>!!D.value),J=u(()=>!!t.profile.bio),b=u(()=>{const e=[];return z.value&&e.push("university"),F.value&&e.push("course"),A.value&&e.push("location"),E.value&&e.push("joined"),J.value&&e.push("bio"),e}),x=u(()=>{const e=[];return t.profile.phone&&e.push({key:"whatsapp",href:`https://wa.me/${t.profile.phone}`,iconClass:"fa-brands fa-whatsapp",label:"WhatsApp"}),t.profile.instagram_username&&e.push({key:"instagram",href:`https://instagram.com/${t.profile.instagram_username}`,iconClass:"fa-brands fa-instagram",label:"Instagram"}),t.profile.tiktok_username&&e.push({key:"tiktok",href:`https://tiktok.com/@${t.profile.tiktok_username}`,iconClass:"fa-brands fa-tiktok",label:"TikTok"}),t.profile.x_username&&e.push({key:"x",href:`https://x.com/${t.profile.x_username.replace(/^@/,"")}`,iconClass:"fa-brands fa-x-twitter",label:"X"}),t.profile.facebook_username&&e.push({key:"facebook",href:`https://facebook.com/${t.profile.facebook_username}`,iconClass:"fa-brands fa-facebook",label:"Facebook"}),t.profile.email_public&&e.push({key:"email",href:`mailto:${t.profile.email_public}`,iconClass:"fa-solid fa-envelope",label:"Email"}),t.profile.website&&e.push({key:"website",href:`https://${t.profile.website}`,iconClass:"fa-solid fa-globe",label:"Website"}),e}),D=u(()=>{if(!t.profile.created_at)return null;const e=new Date(t.profile.created_at);return Number.isNaN(e.getTime())?null:e.toLocaleDateString(void 0,{year:"numeric",month:"long"})}),O=e=>{if(e===null||e==="")return null;const r=new Date(e);if(Number.isNaN(r.getTime()))return null;const o=Date.now(),i=Math.round((r.getTime()-o)/1e3),m=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),W=[{unit:"year",seconds:31536e3},{unit:"month",seconds:2592e3},{unit:"week",seconds:604800},{unit:"day",seconds:86400},{unit:"hour",seconds:3600},{unit:"minute",seconds:60}];for(const $ of W)if(Math.abs(i)>=$.seconds)return m.format(Math.round(i/$.seconds),$.unit);return m.format(i,"second")},w=u(()=>t.posts.data.flatMap(e=>{const r=e.published_at??e.created_at,o=O(r);return(e.media??[]).map((i,m)=>({id:`${e.id}-${m}`,thumb:i.conversions?.thumb??i.conversions?.full??i.original_url??"",full:i.conversions?.full??i.conversions?.thumb??i.original_url??"",description:e.body,postedDiff:o,postedAt:r,downloadName:`@${t.profile.username}-photo-${e.id}-${m+1}.webp`}))})),R=e=>{_.value=w.value.filter(o=>o.full!=="");const r=_.value.findIndex(o=>o.full===e);j.value=r>=0?r:0,g.value=!0};return q(()=>{V.value=window.location.href}),(e,r)=>(s(),n(p,null,[y(C(S),{title:`${a.profile.name} | ${e.$page.props.appName}`},null,8,["title"]),y(G,null,{default:B(()=>[l("section",K,[l("div",Q,[l("div",Y,[l("button",{type:"button",class:"h-80 w-full overflow-hidden rounded-3xl border border-border bg-muted sm:h-96 lg:h-[30rem]",onClick:r[0]||(r[0]=o=>d.value=!0)},[v.value?(s(),n("img",{key:0,src:v.value,alt:a.profile.name,class:"h-full w-full object-cover",loading:"lazy"},null,8,Z)):(s(),n("div",ee,f(T.value),1))])]),l("div",te,[l("div",oe,[l("div",le,[l("h1",se,f(a.profile.name),1),a.profile.is_verified?(s(),k(H,{key:0,class:"size-5 shrink-0 text-primary"})):c("",!0)]),l("p",re," @"+f(a.profile.username),1)]),b.value.length>0||x.value.length>0?(s(),n("div",ae)):c("",!0),b.value.length>0?(s(),n("div",ne,[(s(!0),n(p,null,N(b.value,(o,i)=>(s(),n(p,{key:o},[i>0?(s(),n("div",ie)):c("",!0),o==="university"?(s(),k(C(U),{key:1,href:`/universities/${a.profile.university?.slug}`,class:"flex items-center gap-2 hover:text-foreground"},{default:B(()=>[a.profile.university?.media?.[0]?.conversions?.thumb||a.profile.university?.media?.[0]?.original_url?(s(),n("img",{key:0,src:a.profile.university?.media?.[0]?.conversions?.full??a.profile.university?.media?.[0]?.conversions?.thumb??a.profile.university?.media?.[0]?.original_url??"",alt:a.profile.university?.name??"University logo",class:"h-4 w-4 object-cover"},null,8,ue)):c("",!0),l("span",null,f(a.profile.university?.name),1)]),_:1},8,["href"])):o==="course"?(s(),k(C(U),{key:2,href:`/${a.profile.course?.slug}`,class:"flex items-center gap-2 hover:text-foreground"},{default:B(()=>[r[3]||(r[3]=l("i",{class:"fa-solid fa-graduation-cap"},null,-1)),l("span",null,f(I.value),1)]),_:1},8,["href"])):o==="location"?(s(),n("p",ce,[r[4]||(r[4]=l("i",{class:"fa-solid fa-location-dot"},null,-1)),l("span",null,f(a.profile.location),1)])):o==="joined"?(s(),n("p",fe,[r[5]||(r[5]=l("i",{class:"fa-regular fa-calendar"},null,-1)),l("span",null,"Joined "+f(D.value),1)])):(s(),n("p",de,[r[6]||(r[6]=l("i",{class:"fa-regular fa-note-sticky pt-0.5"},null,-1)),l("span",null,f(a.profile.bio),1)]))],64))),128))])):c("",!0),x.value.length>0&&b.value.length>0?(s(),n("div",me)):c("",!0),x.value.length>0?(s(),n("div",pe,[l("div",he,[(s(!0),n(p,null,N(x.value,o=>(s(),n("a",{key:o.key,href:o.href,target:"_blank",rel:"noopener noreferrer","aria-label":o.label,class:"inline-flex h-12 w-12 items-center justify-center rounded-full border border-border bg-background text-lg hover:bg-accent"},[l("i",{class:M(o.iconClass)},null,2)],8,ge))),128))])])):c("",!0)])])]),l("section",ve,[l("div",be,[(s(!0),n(p,null,N(w.value,o=>(s(),n("button",{key:o.id,type:"button",class:"group overflow-hidden border border-border bg-card text-left",onClick:i=>R(o.full)},[l("img",{src:o.thumb,alt:"Post image",class:"aspect-[3/4] w-full object-cover transition-transform duration-200 group-hover:scale-[1.03]",loading:"lazy"},null,8,ye)],8,xe))),128))]),w.value.length===0?(s(),n("div",ke," No photos published yet. ")):c("",!0)]),y(X,{url:V.value,title:a.profile.name},null,8,["url","title"]),y(P,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=o=>g.value=o),photos:_.value,"initial-index":j.value},null,8,["modelValue","photos","initial-index"]),v.value?(s(),k(P,{key:0,modelValue:d.value,"onUpdate:modelValue":r[2]||(r[2]=o=>d.value=o),photos:[v.value],title:"Profile Photo"},null,8,["modelValue","photos"])):c("",!0)]),_:1})],64))}});export{Le as default};
