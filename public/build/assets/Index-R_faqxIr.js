import{d as w,x as D,c as p,a as o,u as n,h as $,w as u,b as e,m as _,v as g,o as m,F as y,r as A,t as a,y as N,l as B,e as h,f as F,g as b,i as k}from"./app-C4RxZQeq.js";import{_ as z}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-DJqPOgVe.js";import{_ as C}from"./index-2UITHzBk.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-6eVTzFlU.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-BkC7_KcU.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CoMOJCAU.js";import"./useForwardPropsEmits-VfW6L23Z.js";import"./x-BuNzBGro.js";import"./useForwardExpose-CwMYFS2I.js";import"./Presence-C6NHUOAT.js";import"./createLucideIcon-CIIjH0AZ.js";import"./index-CQCdNE30.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-Bixz7yX9.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-TdVNFi_n.js";import"./index-Cv2cN02m.js";import"./VisuallyHidden-BekQp5so.js";import"./index-Dgh_0kKE.js";import"./BottomNav.vue_vue_type_script_setup_true_lang-DN7C7JYV.js";const L={class:"space-y-4 p-4"},T={class:"grid gap-3 md:grid-cols-3"},q={class:"rounded-xl border border-border bg-card p-4"},M={class:"overflow-x-auto"},O={class:"w-full min-w-[900px] text-sm"},P={class:"px-2 py-2"},R={class:"px-2 py-2"},j={class:"px-2 py-2"},G={class:"px-2 py-2"},H={class:"rounded-full border border-border px-2 py-0.5 text-xs"},J={class:"px-2 py-2"},K={class:"px-2 py-2"},Q={class:"px-2 py-2"},W={class:"flex items-center gap-2"},X=["href"],Y={key:0},_e=w({__name:"Index",props:{users:{},filters:{}},setup(c){const f=c,r=D({search:f.filters.search,role:f.filters.role,status:f.filters.status}),d=b(!1),i=b(null),x=b(!1),v=()=>{k.get("/admin/users",r,{preserveState:!0,preserveScroll:!0,replace:!0})},S=l=>{i.value=l,d.value=!0},U=()=>{i.value!==null&&(x.value=!0,k.delete(`/admin/users/${i.value}`,{preserveScroll:!0,onFinish:()=>{x.value=!1,d.value=!1,i.value=null}}))},V=l=>l==="active"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":l==="suspended"?"bg-amber-500/10 text-amber-600 dark:text-amber-400":"bg-destructive/10 text-destructive";return(l,t)=>(m(),p(y,null,[o(n($),{title:"Users"}),o(I,null,{default:u(()=>[e("div",L,[t[10]||(t[10]=e("h1",{class:"text-2xl font-semibold"},"Users",-1)),e("div",T,[o(n(E),{modelValue:r.search,"onUpdate:modelValue":t[0]||(t[0]=s=>r.search=s),placeholder:"Search users...",onInput:v},null,8,["modelValue"]),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.role=s),class:"rounded-md border border-input bg-background px-3 py-2 text-sm",onChange:v},[...t[4]||(t[4]=[e("option",{value:""},"All roles",-1),e("option",{value:"student"},"Student",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"superadmin"},"Superadmin",-1)])],544),[[g,r.role]]),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.status=s),class:"rounded-md border border-input bg-background px-3 py-2 text-sm",onChange:v},[...t[5]||(t[5]=[e("option",{value:""},"All statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"banned"},"Banned",-1),e("option",{value:"suspended"},"Suspended",-1)])],544),[[g,r.status]])]),e("div",q,[e("div",M,[e("table",O,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"border-b border-border text-left"},[e("th",{class:"px-2 py-2"},"Name"),e("th",{class:"px-2 py-2"},"Email"),e("th",{class:"px-2 py-2"},"Username"),e("th",{class:"px-2 py-2"},"Role"),e("th",{class:"px-2 py-2"},"Status"),e("th",{class:"px-2 py-2"},"Created"),e("th",{class:"px-2 py-2"},"Actions")])],-1)),e("tbody",null,[(m(!0),p(y,null,A(c.users.data,s=>(m(),p("tr",{key:s.id,class:"border-b border-border/60"},[e("td",P,a(s.name),1),e("td",R,a(s.email),1),e("td",j,"@"+a(s.username),1),e("td",G,[e("span",H,a(s.role),1)]),e("td",J,[e("span",{class:N(["rounded-full px-2 py-0.5 text-xs",V(s.status)])},a(s.status),3)]),e("td",K,a(s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"),1),e("td",Q,[e("div",W,[o(n(B),{href:`/admin/users/${s.id}/edit`},{default:u(()=>[o(n(C),{variant:"outline",size:"sm"},{default:u(()=>[...t[6]||(t[6]=[h("Edit",-1)])]),_:1})]),_:1},8,["href"]),e("a",{href:`/@${s.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," Profile ",8,X),o(n(C),{variant:"destructive",size:"sm",onClick:Z=>S(s.id)},{default:u(()=>[...t[7]||(t[7]=[h(" Delete ",-1)])]),_:1},8,["onClick"])])])]))),128)),c.users.data.length===0?(m(),p("tr",Y,[...t[8]||(t[8]=[e("td",{colspan:"7",class:"px-2 py-6 text-center text-sm text-muted-foreground"}," No users found for the current filters. ",-1)])])):F("",!0)])])])])]),o(z,{open:d.value,title:"Delete User",description:"Are you sure you want to delete this user account? This action cannot be undone.","confirm-text":"Delete",processing:x.value,"onUpdate:open":t[3]||(t[3]=s=>d.value=s),onConfirm:U},null,8,["open","processing"])]),_:1})],64))}});export{_e as default};
