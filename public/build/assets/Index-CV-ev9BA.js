import{d as S,g as p,c,a as r,u as o,h as k,w as a,b as e,l as x,e as f,o as _,F as b,r as V,t as l,i as g}from"./app-V76evz6G.js";import{e as D}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-Dr8b2uXp.js";import{_ as h}from"./FlashMessages.vue_vue_type_script_setup_true_lang-CRIGBRWp.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-TncQ48jP.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BCmUAUV4.js";import"./useForwardPropsEmits-Do_0Ola4.js";import"./RovingFocusGroup-C17lhl7u.js";import"./useForwardExpose-FvI28VS4.js";import"./index-hQ9SfOkF.js";import"./createLucideIcon-D8DlfC-D.js";import"./index-ueziRkVZ.js";import"./index-Sn8BDqwf.js";import"./VisuallyHidden-DoVP1t1k.js";const U={class:"space-y-4 p-4"},z={class:"flex items-center justify-between"},B={class:"rounded-xl border border-border bg-card p-4"},F={class:"overflow-x-auto"},I={class:"w-full min-w-[960px] text-sm"},A={class:"px-2 py-2"},E={class:"px-2 py-2"},L={class:"px-2 py-2"},j={class:"px-2 py-2"},q={class:"px-2 py-2"},O=["href"],re=S({__name:"Index",props:{courses:{},search:{}},setup(v){const u=p(v.search),n=p(!1),i=p(null),m=p(!1),y=d=>d.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),w=()=>{g.get("/admin/courses",{search:u.value},{preserveState:!0,preserveScroll:!0,replace:!0})},C=d=>{i.value=d,n.value=!0},$=()=>{i.value!==null&&(m.value=!0,g.delete(`/admin/courses/${i.value}`,{preserveScroll:!0,onFinish:()=>{m.value=!1,n.value=!1,i.value=null}}))};return(d,t)=>(_(),c(b,null,[r(o(k),{title:"Programs"}),r(N,null,{default:a(()=>[e("div",U,[e("div",z,[t[3]||(t[3]=e("h1",{class:"text-2xl font-semibold"},"Programs",-1)),r(o(x),{href:"/admin/courses/create"},{default:a(()=>[r(o(h),null,{default:a(()=>[...t[2]||(t[2]=[f("Create Program",-1)])]),_:1})]),_:1})]),r(o(P),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:"Search programs...",onInput:w},null,8,["modelValue"]),e("div",B,[e("div",F,[e("table",I,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"border-b border-border text-left"},[e("th",{class:"px-2 py-2"},"Program"),e("th",{class:"px-2 py-2"},"University"),e("th",{class:"px-2 py-2"},"Shortcode"),e("th",{class:"px-2 py-2"},"Cohorts"),e("th",{class:"px-2 py-2"},"Actions")])],-1)),e("tbody",null,[(_(!0),c(b,null,V(v.courses.data,s=>(_(),c("tr",{key:s.id,class:"border-b border-border/50"},[e("td",A,l(s.name)+" ("+l(s.short_name)+") ",1),e("td",E,l(s.university?.name),1),e("td",L,l(s.shortcode),1),e("td",j,l(s.course_years_count),1),e("td",q,[r(o(x),{href:`/admin/courses/${s.id}/edit`},{default:a(()=>[r(o(h),{variant:"outline",size:"sm"},{default:a(()=>[...t[4]||(t[4]=[f("Edit",-1)])]),_:1})]),_:1},8,["href"]),e("a",{href:`/course/${y(s.short_name)}`,target:"_blank",rel:"noopener noreferrer",class:"ml-2 inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," View ",8,O),r(o(h),{variant:"destructive",size:"sm",class:"ml-2",onClick:G=>C(s.id)},{default:a(()=>[...t[5]||(t[5]=[f(" Delete ",-1)])]),_:1},8,["onClick"])])]))),128))])])])])]),r(D,{open:n.value,title:"Delete Program",description:"Are you sure you want to delete this program? Users assigned to its cohorts will have membership cleared.","confirm-text":"Delete",processing:m.value,"onUpdate:open":t[1]||(t[1]=s=>n.value=s),onConfirm:$},null,8,["open","processing"])]),_:1})],64))}});export{re as default};
