import{d as w,n as D,c as u,a as o,u as n,h as $,w as p,b as e,m as _,v as g,o as c,F as y,r as A,t as a,y as N,l as B,e as h,f as F,g as b,i as k}from"./app-a-DHXOwM.js";import{e as z}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-nkoA9ZOP.js";import{_ as C}from"./FlashMessages.vue_vue_type_script_setup_true_lang-C874Aq3G.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-I2dLO8Av.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-CGJuVEXM.js";import"./useForwardPropsEmits-CZfNtvzl.js";import"./RovingFocusGroup-XsV0CvC-.js";import"./useForwardExpose-BrydD-LM.js";import"./index-BAre4RwE.js";import"./createLucideIcon-DRPyjv3y.js";import"./index-ueziRkVZ.js";import"./index-Ct-cmca8.js";import"./VisuallyHidden-CbnLjvn_.js";const L={class:"space-y-4 p-4"},T={class:"grid gap-3 md:grid-cols-3"},q={class:"rounded-xl border border-border bg-card p-4"},M={class:"overflow-x-auto"},O={class:"w-full min-w-[900px] text-sm"},P={class:"px-2 py-2"},R={class:"px-2 py-2"},j={class:"px-2 py-2"},G={class:"px-2 py-2"},H={class:"rounded-full border border-border px-2 py-0.5 text-xs"},J={class:"px-2 py-2"},K={class:"px-2 py-2"},Q={class:"px-2 py-2"},W={class:"flex items-center gap-2"},X=["href"],Y={key:0},me=w({__name:"Index",props:{users:{},filters:{}},setup(m){const f=m,r=D({search:f.filters.search,role:f.filters.role,status:f.filters.status}),d=b(!1),i=b(null),x=b(!1),v=()=>{k.get("/admin/users",r,{preserveState:!0,preserveScroll:!0,replace:!0})},S=l=>{i.value=l,d.value=!0},U=()=>{i.value!==null&&(x.value=!0,k.delete(`/admin/users/${i.value}`,{preserveScroll:!0,onFinish:()=>{x.value=!1,d.value=!1,i.value=null}}))},V=l=>l==="active"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":l==="suspended"?"bg-amber-500/10 text-amber-600 dark:text-amber-400":"bg-destructive/10 text-destructive";return(l,t)=>(c(),u(y,null,[o(n($),{title:"Users"}),o(I,null,{default:p(()=>[e("div",L,[t[10]||(t[10]=e("h1",{class:"text-2xl font-semibold"},"Users",-1)),e("div",T,[o(n(E),{modelValue:r.search,"onUpdate:modelValue":t[0]||(t[0]=s=>r.search=s),placeholder:"Search users...",onInput:v},null,8,["modelValue"]),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.role=s),class:"rounded-md border border-input bg-background px-3 py-2 text-sm",onChange:v},[...t[4]||(t[4]=[e("option",{value:""},"All roles",-1),e("option",{value:"student"},"Student",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"superadmin"},"Superadmin",-1)])],544),[[g,r.role]]),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.status=s),class:"rounded-md border border-input bg-background px-3 py-2 text-sm",onChange:v},[...t[5]||(t[5]=[e("option",{value:""},"All statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"banned"},"Banned",-1),e("option",{value:"suspended"},"Suspended",-1)])],544),[[g,r.status]])]),e("div",q,[e("div",M,[e("table",O,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"border-b border-border text-left"},[e("th",{class:"px-2 py-2"},"Name"),e("th",{class:"px-2 py-2"},"Email"),e("th",{class:"px-2 py-2"},"Username"),e("th",{class:"px-2 py-2"},"Role"),e("th",{class:"px-2 py-2"},"Status"),e("th",{class:"px-2 py-2"},"Created"),e("th",{class:"px-2 py-2"},"Actions")])],-1)),e("tbody",null,[(c(!0),u(y,null,A(m.users.data,s=>(c(),u("tr",{key:s.id,class:"border-b border-border/60"},[e("td",P,a(s.name),1),e("td",R,a(s.email),1),e("td",j,"@"+a(s.username),1),e("td",G,[e("span",H,a(s.role),1)]),e("td",J,[e("span",{class:N(["rounded-full px-2 py-0.5 text-xs",V(s.status)])},a(s.status),3)]),e("td",K,a(s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"),1),e("td",Q,[e("div",W,[o(n(B),{href:`/admin/users/${s.id}/edit`},{default:p(()=>[o(n(C),{variant:"outline",size:"sm"},{default:p(()=>[...t[6]||(t[6]=[h("Edit",-1)])]),_:1})]),_:1},8,["href"]),e("a",{href:`/@${s.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," Profile ",8,X),o(n(C),{variant:"destructive",size:"sm",onClick:Z=>S(s.id)},{default:p(()=>[...t[7]||(t[7]=[h(" Delete ",-1)])]),_:1},8,["onClick"])])])]))),128)),m.users.data.length===0?(c(),u("tr",Y,[...t[8]||(t[8]=[e("td",{colspan:"7",class:"px-2 py-6 text-center text-sm text-muted-foreground"}," No users found for the current filters. ",-1)])])):F("",!0)])])])])]),o(z,{open:d.value,title:"Delete User",description:"Are you sure you want to delete this user account? This action cannot be undone.","confirm-text":"Delete",processing:x.value,"onUpdate:open":t[3]||(t[3]=s=>d.value=s),onConfirm:U},null,8,["open","processing"])]),_:1})],64))}});export{me as default};
