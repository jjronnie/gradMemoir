import{_ as N}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-DJqPOgVe.js";import{_ as y}from"./LoadingButton.vue_vue_type_script_setup_true_lang-BZdzqf8S.js";import{_ as R}from"./index-2UITHzBk.js";import{_ as U,a as V,b as A,c as B}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CoMOJCAU.js";import{_ as I}from"./DialogDescription.vue_vue_type_script_setup_true_lang-Bixz7yX9.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-BkC7_KcU.js";import{d as z,c as d,a,u as i,h as O,w as r,b as t,o as p,F as c,r as P,t as o,e as n,f as b,g as m,i as w}from"./app-C4RxZQeq.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-TdVNFi_n.js";import"./Spinner.vue_vue_type_script_setup_true_lang-CzuqRdQf.js";import"./createLucideIcon-CIIjH0AZ.js";import"./useForwardPropsEmits-VfW6L23Z.js";import"./x-BuNzBGro.js";import"./useForwardExpose-CwMYFS2I.js";import"./Presence-C6NHUOAT.js";import"./index-CQCdNE30.js";import"./index-Cv2cN02m.js";import"./VisuallyHidden-BekQp5so.js";import"./index-Dgh_0kKE.js";import"./BottomNav.vue_vue_type_script_setup_true_lang-DN7C7JYV.js";const T={class:"space-y-4 p-4"},Y={class:"rounded-xl border border-border bg-card p-4"},q={class:"overflow-x-auto"},E={class:"w-full min-w-[920px] text-sm"},L={class:"px-2 py-2"},j={class:"px-2 py-2"},G={class:"px-2 py-2"},H={class:"px-2 py-2"},J={class:"px-2 py-2"},K={key:0,class:"space-y-2 text-sm"},M={key:1,class:"mt-4 flex flex-wrap gap-2"},Q=["href"],xe=z({__name:"Index",props:{flags:{}},setup($){const s=m(null),f=m(!1),_=m(null),g=m(null),x=m(!1),v=m(null),F=u=>{s.value=u,f.value=!0},k=(u,e)=>{_.value=u,w.put(`/admin/flags/${u}`,{reviewed:e},{preserveScroll:!0,onFinish:()=>{_.value=null}})},D=u=>{v.value=u,x.value=!0},C=()=>{v.value!==null&&(g.value=v.value,w.delete(`/admin/flags/${v.value}`,{preserveScroll:!0,onFinish:()=>{g.value=null,v.value=null,x.value=!1,f.value=!1}}))};return(u,e)=>(p(),d(c,null,[a(i(O),{title:"Flags"}),a(S,null,{default:r(()=>[t("div",T,[e[16]||(e[16]=t("h1",{class:"text-2xl font-semibold"},"User Flags",-1)),t("div",Y,[t("div",q,[t("table",E,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"border-b border-border text-left"},[t("th",{class:"px-2 py-2"},"User"),t("th",{class:"px-2 py-2"},"Flagged By"),t("th",{class:"px-2 py-2"},"Reason"),t("th",{class:"px-2 py-2"},"Reviewed"),t("th",{class:"px-2 py-2"},"Actions")])],-1)),t("tbody",null,[(p(!0),d(c,null,P($.flags.data,l=>(p(),d("tr",{key:l.id,class:"border-b border-border/60"},[t("td",L,o(l.user?.name)+" (@"+o(l.user?.username)+") ",1),t("td",j,o(l.flagged_by?.name),1),t("td",G,o(l.reason),1),t("td",H,o(l.reviewed?"Yes":"No"),1),t("td",J,[a(i(R),{type:"button",size:"sm",variant:"outline",onClick:W=>F(l)},{default:r(()=>[...e[4]||(e[4]=[n(" View ",-1)])]),_:1},8,["onClick"])])]))),128))])])])]),a(i(U),{open:f.value,"onUpdate:open":e[2]||(e[2]=l=>f.value=l)},{default:r(()=>[a(i(V),{class:"max-h-[88vh] max-w-xl overflow-y-auto"},{default:r(()=>[a(i(A),null,{default:r(()=>[a(i(B),null,{default:r(()=>[...e[6]||(e[6]=[n("Flag Details",-1)])]),_:1}),a(i(I),null,{default:r(()=>[...e[7]||(e[7]=[n(" Review this moderation flag. ",-1)])]),_:1})]),_:1}),s.value?(p(),d("div",K,[t("p",null,[e[8]||(e[8]=t("span",{class:"text-muted-foreground"},"Flagged user:",-1)),n(" "+o(s.value.user?.name)+" (@"+o(s.value.user?.username)+") ",1)]),t("p",null,[e[9]||(e[9]=t("span",{class:"text-muted-foreground"},"User email:",-1)),n(" "+o(s.value.user?.email??"N/A"),1)]),t("p",null,[e[10]||(e[10]=t("span",{class:"text-muted-foreground"},"User status:",-1)),n(" "+o(s.value.user?.status??"N/A"),1)]),t("p",null,[e[11]||(e[11]=t("span",{class:"text-muted-foreground"},"Flagged by:",-1)),n(" "+o(s.value.flagged_by?.name),1)]),t("p",null,[e[12]||(e[12]=t("span",{class:"text-muted-foreground"},"Reason:",-1)),n(" "+o(s.value.reason),1)]),t("p",null,[e[13]||(e[13]=t("span",{class:"text-muted-foreground"},"Reviewed:",-1)),n(" "+o(s.value.reviewed?"Yes":"No"),1)])])):b("",!0),s.value?(p(),d("div",M,[a(y,{type:"button",size:"sm",variant:"outline",loading:_.value===s.value.id,"loading-text":"Saving...",onClick:e[0]||(e[0]=l=>k(s.value.id,!s.value.reviewed))},{default:r(()=>[...e[14]||(e[14]=[n(" Toggle Reviewed ",-1)])]),_:1},8,["loading"]),a(y,{type:"button",size:"sm",variant:"destructive",loading:g.value===s.value.id,"loading-text":"Deleting...",onClick:e[1]||(e[1]=l=>D(s.value.id))},{default:r(()=>[...e[15]||(e[15]=[n(" Delete ",-1)])]),_:1},8,["loading"]),s.value.user?.username?(p(),d("a",{key:0,href:`/@${s.value.user.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," View Public Profile ",8,Q)):b("",!0)])):b("",!0)]),_:1})]),_:1},8,["open"]),a(N,{open:x.value,title:"Delete Flag",description:"Are you sure you want to delete this moderation flag?","confirm-text":"Delete",processing:g.value!==null,"onUpdate:open":e[3]||(e[3]=l=>x.value=l),onConfirm:C},null,8,["open","processing"])])]),_:1})],64))}});export{xe as default};
