import{_ as T}from"./ConfirmActionModal.vue_vue_type_script_setup_true_lang-ChNgf7qG.js";import{_ as B}from"./InputError.vue_vue_type_script_setup_true_lang-D8qotfq0.js";import{_ as k}from"./LoadingButton.vue_vue_type_script_setup_true_lang-DGZMsGfw.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-B5RPFNNU.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-CCIfOzg-.js";import{d as q,j as D,g as n,c as s,a as c,u as w,h as E,w as _,b as t,o as r,F as P,r as R,t as d,p as A,e as S,f,i as F}from"./app-BwoDBmTi.js";import"./index-D21mqHZ5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-uFK_szTC.js";import"./useForwardPropsEmits-C4M-NV3R.js";import"./x-JIVm6lz3.js";import"./useForwardExpose-C0apztFT.js";import"./Presence-D5tmvYTh.js";import"./createLucideIcon-BJDOlxJS.js";import"./index-DEqmV2A2.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-bJ1-nSWY.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BO_yIScT.js";import"./Spinner.vue_vue_type_script_setup_true_lang-BthnRZIA.js";import"./index-zVmKB-0j.js";import"./VisuallyHidden-Bt4Wfgfl.js";import"./index-Dgh_0kKE.js";import"./BottomNav.vue_vue_type_script_setup_true_lang-Rc9wvAIC.js";const L={class:"space-y-4 p-4"},O={class:"rounded-xl border border-border bg-card p-4"},Q={key:0,class:"mt-4 grid gap-3 md:grid-cols-2 xl:grid-cols-3"},W={class:"flex items-start gap-3"},G=["src","alt"],H={key:1,class:"flex h-12 w-12 items-center justify-center rounded bg-muted text-xs text-muted-foreground"},J={class:"min-w-0 flex-1"},K={class:"truncate text-sm font-semibold"},M={class:"truncate text-xs text-muted-foreground"},X={class:"truncate text-xs text-muted-foreground"},Y={class:"mt-3 flex flex-wrap gap-2"},Z=["href"],ee={key:0,class:"text-sm text-muted-foreground"},te={class:"rounded-xl border border-border bg-card p-4"},re={key:0,class:"mb-3 text-xs text-amber-600"},oe={class:"grid gap-3 md:grid-cols-2 xl:grid-cols-3"},se={class:"flex items-start gap-3"},ae=["src","alt"],le={key:1,class:"flex h-12 w-12 items-center justify-center rounded bg-muted text-xs text-muted-foreground"},ne={class:"min-w-0 flex-1"},de={class:"truncate text-sm font-semibold"},ie={class:"truncate text-xs text-muted-foreground"},ue={class:"truncate text-xs text-muted-foreground"},ce={class:"mt-1 text-xs text-muted-foreground"},me={class:"mt-3 flex flex-wrap gap-2"},fe=["href"],pe={key:0,class:"text-sm text-muted-foreground"},Be=q({__name:"Index",props:{featuredProfiles:{},search:{},searchResults:{}},setup(i){const N=i,p=D({user_id:""}),v=n(N.search),m=n(null),g=n(null),u=n(!1),h=n(""),b=n(""),l=n(null);let y=null;const V=()=>{y!==null&&clearTimeout(y),y=setTimeout(()=>{F.get("/admin/featured-profiles",{search:v.value},{preserveState:!0,preserveScroll:!0,replace:!0})},300)},x=a=>a?.[0]?.conversions?.thumb??a?.[0]?.conversions?.full??a?.[0]?.original_url??null,j=a=>{l.value={type:"add",user:a},h.value="Add Featured Profile",b.value=`Add ${a.name} to featured profiles?`,u.value=!0},$=a=>{l.value={type:"remove",id:a},h.value="Remove Featured Profile",b.value="Remove this profile from the featured list?",u.value=!0},z=()=>{if(l.value!==null){if(l.value.type==="add"){const a=l.value.user;p.clearErrors(),p.user_id=String(a.id),g.value=a.id,p.post("/admin/featured-profiles",{preserveScroll:!0,onFinish:()=>{g.value=null,u.value=!1,l.value=null}});return}m.value=l.value.id,F.delete(`/admin/featured-profiles/${l.value.id}`,{preserveScroll:!0,onFinish:()=>{m.value=null,u.value=!1,l.value=null}})}};return(a,o)=>(r(),s(P,null,[c(w(E),{title:"Featured Profiles"}),c(U,null,{default:_(()=>[t("div",L,[o[6]||(o[6]=t("h1",{class:"text-2xl font-semibold"},"Featured Profiles",-1)),t("div",O,[o[4]||(o[4]=t("label",{class:"mb-2 block text-sm font-medium"},"Search users to add/remove",-1)),c(w(I),{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=e=>v.value=e),placeholder:"Search by name, username, or email...",onInput:V},null,8,["modelValue"]),c(B,{message:w(p).errors.user_id,class:"mt-2"},null,8,["message"]),v.value.trim()!==""?(r(),s("div",Q,[(r(!0),s(P,null,R(i.searchResults,e=>(r(),s("article",{key:e.id,class:"rounded-lg border border-border p-3"},[t("div",W,[x(e.media)?(r(),s("img",{key:0,src:x(e.media)??"",alt:e.name,class:"h-12 w-12 rounded object-cover",loading:"lazy"},null,8,G)):(r(),s("div",H," N/A ")),t("div",J,[t("p",K,d(e.name),1),t("p",M," @"+d(e.username),1),t("p",X,d(e.email),1)])]),t("div",Y,[t("a",{href:`/@${e.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," Show ",8,Z),e.featured_profile?(r(),A(k,{key:1,type:"button",size:"sm",variant:"destructive",loading:m.value===e.featured_profile.id,"loading-text":"Removing...",onClick:C=>$(e.featured_profile.id)},{default:_(()=>[...o[3]||(o[3]=[S(" Remove ",-1)])]),_:1},8,["loading","onClick"])):(r(),A(k,{key:0,type:"button",size:"sm",loading:g.value===e.id,"loading-text":"Adding...",onClick:C=>j(e)},{default:_(()=>[...o[2]||(o[2]=[S(" Add ",-1)])]),_:1},8,["loading","onClick"]))])]))),128)),i.searchResults.length===0?(r(),s("p",ee," No matching users found. ")):f("",!0)])):f("",!0)]),t("div",te,[i.featuredProfiles.data.length>20?(r(),s("p",re," Warning: more than 20 featured profiles may reduce homepage quality. ")):f("",!0),t("div",oe,[(r(!0),s(P,null,R(i.featuredProfiles.data,e=>(r(),s("article",{key:e.id,class:"rounded-lg border border-border p-3"},[t("div",se,[x(e.user?.media)?(r(),s("img",{key:0,src:x(e.user?.media)??"",alt:e.user?.name??"Profile photo",class:"h-12 w-12 rounded object-cover",loading:"lazy"},null,8,ae)):(r(),s("div",le," N/A ")),t("div",ne,[t("p",de,d(e.user?.name),1),t("p",ie," @"+d(e.user?.username),1),t("p",ue,d(e.user?.email),1),t("p",ce," Sort order: "+d(e.sort_order),1)])]),t("div",me,[e.user?.username?(r(),s("a",{key:0,href:`/@${e.user.username}`,target:"_blank",rel:"noopener noreferrer",class:"inline-flex h-8 items-center rounded-md border border-border px-3 text-xs hover:bg-accent"}," Show ",8,fe)):f("",!0),c(k,{type:"button",size:"sm",variant:"destructive",loading:m.value===e.id,"loading-text":"Removing...",onClick:C=>$(e.id)},{default:_(()=>[...o[5]||(o[5]=[S(" Remove ",-1)])]),_:1},8,["loading","onClick"])])]))),128)),i.featuredProfiles.data.length===0?(r(),s("p",pe," No featured profiles yet. ")):f("",!0)])])]),c(T,{open:u.value,title:h.value,description:b.value,"confirm-text":l.value?.type==="add"?"Add":"Remove","confirm-variant":l.value?.type==="add"?"default":"destructive",processing:g.value!==null||m.value!==null,"onUpdate:open":o[1]||(o[1]=e=>u.value=e),onConfirm:z},null,8,["open","title","description","confirm-text","confirm-variant","processing"])]),_:1})],64))}});export{Be as default};
